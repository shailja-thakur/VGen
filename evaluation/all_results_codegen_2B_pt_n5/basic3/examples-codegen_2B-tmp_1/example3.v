// This is a 3-bit priority encoder. If none of the input bits are high, output is zero.
module priority_encoder( 
input [2:0] in,
output reg [1:0] pos ); 
// When sel=1, assign b to out
assign out 0
binpos_t pos = 
{ 
0{
.device_id = 1{ 
	if ( pos >> 3 ) > 0
	return ('11111100 01' + pos << 3 - 1) [0..7]
	else
	return ('00111001 000' + pos << 4 - 2) [0..7]
} 
}
) input pos $endpos;
endmodule
